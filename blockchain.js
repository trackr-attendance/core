var rp = require('request-promise');

var message = {
	"type": 1,
	"class": " MIT-1.125-2017",
  "message": "test to node2."
	// "date": "2017-11-14T19:59:00.000Z",
	// "location": "+42.3578-071.0916+015.000/",
	// "attendance": [ 11, 12, 13, 14, 15, 2, 3, 5, 7 ]
};

// var message = {
// 	"type": 2,
// 	"class": " MIT-1.125-2017",
// 	"date": "2017-11-14T19:59:00.000Z",
// 	"location": "+42.3578-071.0916+015.000/",
// 	"engagement": [ {
//       "score" : 0.061664978663126625,
//       "time" : 59
//     }, {
//       "score" : 0.4365934127966563,
//       "time" : 58
//     }, {
//       "score" : 0.4095202729105949,
//       "time" : 57
//     }, {
//       "score" : 0.44342204930053813,
//       "time" : 56
//     }, {
//       "score" : 0.4835808833109007,
//       "time" : 55
//     }, {
//       "score" : 0.4918173890511195,
//       "time" : 54
//     }, {
//       "score" : 0.56335515721639,
//       "time" : 53
//     }, {
//       "score" : 0.344019284248352,
//       "time" : 52
//     }, {
//       "score" : 0.3571140380038155,
//       "time" : 51
//     }, {
//       "score" : 0.5240054219630029,
//       "time" : 50
//     }, {
//       "score" : 0.486544841448466,
//       "time" : 49
//     }, {
//       "score" : 0.4058197478453318,
//       "time" : 48
//     }, {
//       "score" : 0.41923385255411266,
//       "time" : 47
//     }, {
//       "score" : 0.42356096925834813,
//       "time" : 46
//     }, {
//       "score" : 0.48660973862806955,
//       "time" : 45
//     }, {
//       "score" : 0.3360785349210103,
//       "time" : 44
//     }, {
//       "score" : 0.24043208549833958,
//       "time" : 43
//     }, {
//       "score" : 0.4151673932373524,
//       "time" : 42
//     }, {
//       "score" : 0.37020885825157157,
//       "time" : 41
//     }, {
//       "score" : 0.2207604258259137,
//       "time" : 40
//     }, {
//       "score" : 0.25523950004577634,
//       "time" : 39
//     }, {
//       "score" : 0.23861668626467386,
//       "time" : 38
//     }, {
//       "score" : 0.13865225156148275,
//       "time" : 37
//     }, {
//       "score" : 0.40817977799309624,
//       "time" : 36
//     }, {
//       "score" : 0.3353656454086303,
//       "time" : 35
//     }, {
//       "score" : -0.027389321327209473,
//       "time" : 34
//     }, {
//       "score" : 0.1687304359177748,
//       "time" : 33
//     }, {
//       "score" : 0.2780446275075277,
//       "time" : 32
//     }, {
//       "score" : 0.3739327392313215,
//       "time" : 31
//     }, {
//       "score" : 0.2588245170911153,
//       "time" : 30
//     }, {
//       "score" : 0.08802443610297307,
//       "time" : 29
//     }, {
//       "score" : 0.24533700883388518,
//       "time" : 28
//     }, {
//       "score" : 0.38067496200402573,
//       "time" : 27
//     }, {
//       "score" : 0.15625120544433596,
//       "time" : 26
//     }, {
//       "score" : 0.5573087485631307,
//       "time" : 25
//     }, {
//       "score" : 0.17912278705173068,
//       "time" : 24
//     }, {
//       "score" : 0.5018578239437193,
//       "time" : 23
//     }, {
//       "score" : 0.370514484445254,
//       "time" : 22
//     }, {
//       "score" : 0.1401877107620239,
//       "time" : 21
//     }, {
//       "score" : 0.2270416833112637,
//       "time" : 20
//     }, {
//       "score" : 0.11440825366973875,
//       "time" : 19
//     }, {
//       "score" : -0.012929831047852832,
//       "time" : 18
//     }, {
//       "score" : 0.3189940673112869,
//       "time" : 17
//     }, {
//       "score" : 0.14418672196070353,
//       "time" : 16
//     }, {
//       "score" : 0.10999329137802123,
//       "time" : 15
//     }, {
//       "score" : 0.25812862282707577,
//       "time" : 14
//     }, {
//       "score" : 0.16034494744406805,
//       "time" : 13
//     }, {
//       "score" : 0.21294777194658912,
//       "time" : 12
//     }, {
//       "score" : 0.3820490376427769,
//       "time" : 11
//     }, {
//       "score" : 0.16326702723900474,
//       "time" : 10
//     }, {
//       "score" : 0.035723026593526185,
//       "time" : 9
//     }, {
//       "score" : 0.2778072369893391,
//       "time" : 8
//     }, {
//       "score" : 0.01219449567794798,
//       "time" : 7
//     }, {
//       "score" : 0.06912371767891777,
//       "time" : 6
//     }, {
//       "score" : 0.1078249031305313,
//       "time" : 5
//     }, {
//       "score" : 0.1331792208126613,
//       "time" : 4
//     }, {
//       "score" : 0.0933116348584493,
//       "time" : 3
//     }, {
//       "score" : 0.021337202191352836,
//       "time" : 2
//     }, {
//       "score" : 0.14390368084112803,
//       "time" : 1
//     } ]
// };

var BLOCKCHAIN_URL = 'http://localhost:8082/mineBlock';

var options = {
    method: 'POST',
    uri: BLOCKCHAIN_URL,
    body: {
        data: message,
    },
    json: true // Automatically stringifies the body to JSON
};

rp(options).then(function (parsedBody) {
	// POST succeeded...
	console.log(parsedBody);
}).catch(function (err) {
	// POST failed...
	console.log("err", err);
});